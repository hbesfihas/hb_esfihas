{% extends 'base.html' %}
{% block content %}
<div class="container text-center mt-5">
  <h2 class="text-success">ðŸŽ‰ Pedido #{{ pedido.id }} realizado com sucesso!</h2>
  <p class="mt-3">Acompanhe o status do seu pedido na Ã¡rea "Meus Pedidos".</p>
  
  <div class="card mt-4 mx-auto" style="max-width: 500px;">
    <div class="card-header fw-bold">
      Pagamento via Pix
    </div>
    <div class="card-body">
      <p>Para finalizar, pague o valor de <strong>R$ {{ pedido.total|floatformat:2 }}</strong> usando o cÃ³digo abaixo:</p>
      
      <div class="input-group">
        <input type="text" id="pixCopiaECola" class="form-control" value="{{ pix_payload }}" readonly>
        <button class="btn btn-outline-primary" type="button" id="btnCopiar">Copiar CÃ³digo</button>
      </div>
      <small id="copiadoMsg" class="text-success mt-2" style="display: none;">Copiado!</small>
      <p class="mt-3 text-muted"><small>VocÃª tambÃ©m pode escanear o QR Code em nosso balcÃ£o.</small></p>
    </div>
  </div>


  <a href="{% url 'home' %}" class="btn btn-primary mt-4">Voltar ao cardÃ¡pio</a>
</div>

{% if pix_payload %}
<script>
  // Script simples para o botÃ£o de copiar
  document.getElementById('btnCopiar').addEventListener('click', function() {
    const input = document.getElementById('pixCopiaECola');
    input.select();
    input.setSelectionRange(0, 99999); // Para mobile
    document.execCommand('copy');

    const msg = document.getElementById('copiadoMsg');
    msg.style.display = 'block';
    setTimeout(() => { msg.style.display = 'none'; }, 2000);
  });
</script>
{% endif %}

{% endblock %}