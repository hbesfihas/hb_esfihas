{% extends 'base.html' %}
{% load static %}
{% block title %}Painel de Pedidos | HB Esfihas{% endblock %}

{% block content %}
<h2 class="text-center mb-4">ðŸ“‹ Painel de Pedidos</h2>

<div class="card card-body mb-4">
    <form method="GET" action="{% url 'painel_gerente' %}" class="row g-3 align-items-end">
        <div class="col-md-3">
            <label for="data" class="form-label">Data</label>
            <input type="date" name="data" id="data" class="form-control" value="{{ data_selecionada }}">
        </div>
        <div class="col-md-4">
            <label for="cliente" class="form-label">Cliente</label>
            <select name="cliente" id="cliente" class="form-select">
                <option value="">Todos os Clientes</option>
                {% for cliente in todos_clientes %}
                    <option value="{{ cliente.id }}" {% if cliente.id == cliente_selecionado_id %}selected{% endif %}>
                        {{ cliente.nome }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="col-md-3">
            <label for="pago" class="form-label">Pagamento</label>
            <select name="pago" id="pago" class="form-select">
                <option value="">Todos</option>
                <option value="sim" {% if pago_selecionado == 'sim' %}selected{% endif %}>Pagos</option>
                <option value="nao" {% if pago_selecionado == 'nao' %}selected{% endif %}>NÃ£o Pagos</option>
            </select>
        </div>
        <div class="col-md-2 d-grid">
            <button type="submit" class="btn btn-primary">Filtrar</button>
        </div>
    </form>
    <div class="d-flex justify-content-center mt-2">
        <a href="{% url 'painel_gerente' %}" class="btn btn-link btn-sm">Ver Apenas Hoje</a>
        <a href="?data=&cliente=&pago=" class="btn btn-link btn-sm text-secondary">Ver Todos / Limpar Filtros</a>
    </div>
</div>

<div id="lista-pedidos">
    {% for pedido in pedidos %}
        {% include 'partials/card_pedido_gerente.html' with pedido=pedido %}
    {% empty %}
        <p class="text-center" id="sem-pedidos-msg">Nenhum pedido encontrado para os filtros selecionados.</p>
    {% endfor %}
</div>

<audio id="som-notificacao" src="{% static 'sons/notificacao.mp3' %}" preload="auto"></audio>

<script src="{% static 'js/painel_gerente.js' %}"></script>
{% endblock %}